<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nicholas Bagenda ‚Äì Home</title>
    
    <meta name="google-site-verification" content="_fuLs7ujw7KmQmXrSOffFmMLakhUERuxcJ061DokHGI" />
    <meta property="og:title" content="Bagenda Nicholas - Portfolio">
    <meta property="og:description" content="Explore the creativity, skills, and digital work of Bagenda Nicholas.">
    <meta property="og:image" content="https://i.postimg.cc/t4yDG3Fq/Mon-21-07-2025-16-26-06.png">
    <meta property="og:url" content="https://nicholasbagenda.netlify.app/">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <style>
        /* BASE STYLES */
        html, body {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Open Sans', Arial, sans-serif;
            background: linear-gradient(120deg, #23294a 0%, #181d2f 100%);
            color: #fff; min-height: 100vh;
        }
        *, *::before, *::after { box-sizing: inherit; }

        body { opacity: 0; filter: blur(12px); transition: opacity 1.2s ease, filter 1.8s ease; }
        body.loaded { opacity: 1; filter: blur(0); }

        /* MARQUEE */
        .marquee-wrap {
            overflow: hidden; background: linear-gradient(90deg, #ffd700 40%, #ffb5ff 100%);
            margin-bottom: 15px; border-bottom: 3px solid #ffd70099;
        }
        .marquee {
            white-space: nowrap; display: block; font-family: 'Montserrat', sans-serif;
            font-weight: 700; font-size: 1.35em; color: #fff;
            animation: marqueeAnim 16s linear infinite; padding: 7px 0;
        }
        .shining-name {
            background: linear-gradient(92deg, #41ff41 30%, #04e004 60%, #41ff41 90%);
            background-size: 200% auto; -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; padding: 0 13px; font-weight: 900;
        }
        @keyframes marqueeAnim { 0% { transform: translateX(0); } 100% { transform: translateX(-50%);} }

        /* NAVIGATION */
        nav {
            background: #181d2f; padding: 18px 0; text-align: center;
            position: sticky; top: 0; z-index: 10; border-bottom: 2px solid #ffd70022;
        }
        nav .logo { font-family: 'Montserrat', sans-serif; font-size: 1.55em; color: #ffd700; margin-right: 40px; }
        nav a:not(.download-btn) { color: #ffd700; text-decoration: none; font-weight: 600; margin: 0 13px; }
        
        .download-btn {
           display: inline-flex; align-items: center; gap: 12px; padding: 10px 20px;
           background: linear-gradient(135deg, #007bff, #00c6ff); color: #fff !important;
           text-decoration: none; border-radius: 14px; transition: 0.3s;
        }

        /* HERO & CARDS */
        .hero { text-align: center; padding: 60px 20px; }
        .profile-pic { width: 145px; height: 145px; border-radius: 50%; border: 4px solid #ffd700; margin-bottom: 16px; }
        
        .quick-links { display: flex; flex-wrap: wrap; gap: 30px; justify-content: center; margin: 35px 0; }
        .quick-card {
            background: #23294a; border-radius: 13px; padding: 30px;
            text-align: center; color: #fff; border: 2px solid #ffd70018;
            text-decoration: none; min-width: 200px; transition: 0.3s;
        }
        .quick-card:hover { transform: translateY(-5px); border-color: #ffd700; }

        /* CONTACT FORM */
        .contact-form-section {
            max-width: 470px; margin: 0 auto 36px; background: #23294a;
            border-radius: 10px; border-left: 5px solid #ffd700; padding: 22px;
        }
        #contact-form input, #contact-form textarea {
            width: 100%; margin-bottom: 12px; padding: 10px;
            background: #181d2f; color: #fff; border: 1px solid #ffd70044; border-radius: 4px;
        }
        #contact-form button {
            width: 100%; padding: 12px; background: #ffd700; color: #23294a;
            border: none; font-weight: bold; cursor: pointer; border-radius: 4px;
        }
        .form-success { color: #4be16b; margin-top: 10px; }
        .form-error { color: #e14b4b; margin-top: 10px; }

        /* FOOTER & BUTTONS */
        footer { text-align: center; padding: 30px; background: #181d2f; color: #ffd700bb; }
        .sign-out-container { text-align: center; padding: 20px; }
        .sign-out-btn { background: #dc3545; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; }

        .sparkle { color: #ffd700; }
    </style>
</head>
<body>

    <div class="marquee-wrap">
        <div class="marquee" id="marquee-content">
            <span class="shining-name">‚ú®Ô∏è Nicholas Bagenda ‚ú®Ô∏è</span>
            <span class="shining-name">üíõ Nicholas Bagenda üíõ</span>
            <span class="shining-name">üíñ Nicholas Bagenda üíñ</span>
        </div>
    </div>

    <nav>
        <span class="logo">Nicholas Bagenda</span>
        <a href="index.html">Home</a>
        <a href="#contact">Contact</a>
        <a href="https://github.com/BagendaNicholas/My-website-/raw/main/NicholasAI%20(1).apk" class="download-btn">Download APK</a>
    </nav>

    <section class="hero">
        <img src="https://i.postimg.cc/W3kM7rgd/20250518-101215.jpg" class="profile-pic" alt="Nicholas" />
        <h1>Welcome to My Digital Story</h1>
        <p>Ugandan Web Developer & Storyteller</p>
    </section>

    <div class="quick-links">
        <a href="index2.html" class="quick-card"><span>üìö</span><br>Books</a>
        <a href="index3.html" class="quick-card"><span>üéß</span><br>Media</a>
        <a href="index4.html" class="quick-card"><span>‚ú®</span><br>Inspiration</a>
    </div>

    <section class="contact-form-section" id="contact">
        <h3>Send me a message</h3>
        <form id="contact-form">
            <label>Name</label>
            <input type="text" name="from_name" required>
            <label>Email</label>
            <input type="email" name="reply_to" required>
            <label>Message</label>
            <textarea name="message" rows="4" required></textarea>
            <button type="submit" id="send-btn">Send Message</button>
            <div id="form-status"></div>
        </form>
    </section>

    <footer>
        &copy; 2025 Nicholas Bagenda. Built with heart üíñ
    </footer>

    <div class="sign-out-container">
        <button id="signOutBtn" class="sign-out-btn">üîì Sign Out</button>
    </div>

    <script type="module">
        // 1. FIREBASE IMPORTS
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        // 2. CONFIGURATION
        const firebaseConfig = {
            apiKey: "AIzaSyA1cxvtP7aw_w1QcZ_ytBtIPbzWtlTVhzg",
            authDomain: "my-website-357cb.firebaseapp.com",
            projectId: "my-website-357cb",
            storageBucket: "my-website-357cb.appspot.com",
            messagingSenderId: "759627961944",
            appId: "1:759627961944:web:eb65a9fbd8856fbdab5c2d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // 3. EMAILJS INITIALIZATION
        // Replace with your PUBLIC KEY from EmailJS Account > API Keys
        emailjs.init({
          publicKey: "7rDjOLguEcDWzn3X1",
        });

        // 4. PAGE LOAD EFFECTS
        window.addEventListener('load', () => {
            document.body.classList.add('loaded');
            const marquee = document.getElementById('marquee-content');
            marquee.innerHTML += marquee.innerHTML; // Seamless loop
        });

        // 5. CONTACT FORM LOGIC
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const btn = document.getElementById('send-btn');
            const statusDiv = document.getElementById('form-status');
            
            btn.innerText = "Sending...";
            
            // service_id and template_id from your EmailJS dashboard
            emailjs.sendForm('service_8q8dc7h', 'template_t76v6a4', this)
                .then(() => {
                    statusDiv.textContent = 'Message sent successfully! ‚ú®';
                    statusDiv.className = 'form-success';
                    btn.innerText = "Send Message";
                    contactForm.reset();
                }, (error) => {
                    console.error('EmailJS Error:', error);
                    statusDiv.textContent = 'Failed to send. Check console.';
                    statusDiv.className = 'form-error';
                    btn.innerText = "Send Message";
                });
        });

        // 6. FIREBASE AUTH LOGIC
        onAuthStateChanged(auth, async (user) => {
            const currentPage = window.location.pathname.split("/").pop();
            const isLoginPage = currentPage === "index.html" || currentPage === "";

            if (user) {
                console.log("Logged in as:", user.email);
                // Save/Update user in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    email: user.email,
                    lastSeen: new Date().toISOString()
                }, { merge: true });
            } else {
                // If not logged in and not on index.html, redirect to login
                if (!isLoginPage) {
                    window.location.href = "index.html";
                }
            }
        });

        // 7. SIGN OUT LOGIC
        document.getElementById("signOutBtn").addEventListener("click", () => {
            signOut(auth).then(() => {
                window.location.href = "index.html";
            }).catch((err) => console.error("Signout Error", err));
        });
    </script>
</body>
</html>
