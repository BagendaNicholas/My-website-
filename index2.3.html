<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NicholasAI Chat</title>
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background: #1a1a2e;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .chat-container {
        width: 90%;
        max-width: 600px;
        background: #162447;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        box-shadow: 0 0 15px #0f3460;
    }
    .chat-header {
        background: #0f3460;
        padding: 15px;
        font-size: 1.5em;
        font-weight: bold;
        text-align: center;
        border-bottom: 2px solid #53354a;
    }
    .chat-window {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
    }
    .message {
        margin: 8px 0;
        padding: 10px 15px;
        border-radius: 20px;
        max-width: 75%;
        clear: both;
        position: relative;
    }
    .user {
        background: #e94560;
        float: right;
        text-align: right;
    }
    .ai {
        background: #53354a;
        float: left;
        text-align: left;
    }
    .typing {
        font-style: italic;
        opacity: 0.7;
    }
    .input-container {
        display: flex;
        border-top: 2px solid #0f3460;
    }
    input {
        flex: 1;
        padding: 15px;
        border: none;
        border-radius: 0;
        outline: none;
        font-size: 1em;
        background: #1a1a2e;
        color: #fff;
    }
    button {
        padding: 0 20px;
        border: none;
        background: #0f3460;
        color: #fff;
        cursor: pointer;
        font-size: 1em;
        transition: 0.3s;
    }
    button:hover {
        background: #53354a;
    }
</style>
</head>
<body>

<div class="chat-container">
    <div class="chat-header">NicholasAI 🤖</div>
    <div class="chat-window" id="chatWindow"></div>
    <div class="input-container">
        <input type="text" id="userInput" placeholder="Type a message..." />
        <button onclick="sendMessage()">Send</button>
        <button onclick="startVoiceInput()">🎤</button>
    </div>
</div>

<script>
const chatWindow = document.getElementById('chatWindow');

function addMessage(text, sender, typing=false) {
    const msg = document.createElement('div');
    msg.className = 'message ' + sender + (typing ? ' typing' : '');
    msg.textContent = text;
    chatWindow.appendChild(msg);
    chatWindow.scrollTop = chatWindow.scrollHeight;
    return msg;
}

function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function getResponse(message) {
    message = message.toLowerCase().trim();

    const responses = {
        greetings: [
            "Hey there! How’s it going?",
            "Hi! Good to see you 😊",
            "Hello! I’m ready to chat with you."
        ],
        howAreYou: [
            "I’m your Big Bro, Nicholas! Always doing great 😎",
            "Feeling awesome today! How about you?",
            "I’m here, ready to help you out!"
        ],
        help: [
            "Sure! I can guide you. What do you need help with?",
            "I’m here to help! Ask me anything.",
            "You can ask me anything—from tech tips to life advice."
        ],
        time: [
            () => `It’s currently ${new Date().toLocaleTimeString()}`,
            () => `Right now, the time is ${new Date().toLocaleTimeString()}`
        ],
        date: [
            () => `Today is ${new Date().toDateString()}`,
            () => `It’s ${new Date().toLocaleDateString()} today`
        ],
        feelings: [
            "I’m always excited to chat with you!",
            "I’m doing great, thanks for asking!",
            "Feeling very ready to assist you 😄"
        ],
        tech: [
            "Tech is amazing! What specifically do you want to know?",
            "I can help with programming, AI, or web stuff.",
            "I love talking about tech! Tell me what you’re curious about."
        ],
        jokes: [
            "Why did the computer go to the doctor? It caught a virus! 😅",
            "I would tell you a UDP joke, but you might not get it.",
            "Why do programmers prefer dark mode? Because light attracts bugs!"
        ],
        spiritual: [
            "“The joy of the Lord is your strength.” – Nehemiah 8:10",
            "Keep faith, Nicholas! God sees your heart.",
            "Every day is a gift. Stay grateful and strong."
        ],
        motivation: [
            "You can do it! 💪 Keep pushing forward!",
            "Believe in yourself, Nicholas. The best is ahead!",
            "Small steps every day lead to big results!"
        ],
        games: [
            "Let’s play a quick guessing game! Think of a number 1-10.",
            "I can quiz you: What is the capital of France?",
            "Trivia time! Who invented the first computer?"
        ]
    };

    if (message.includes("hello") || message.includes("hi")) return randomChoice(responses.greetings);
    if (message.includes("how are you")) return randomChoice(responses.howAreYou);
    if (message.includes("help")) return randomChoice(responses.help);
    if (message.includes("time")) return randomChoice(responses.time)();
    if (message.includes("date") || message.includes("day")) return randomChoice(responses.date)();
    if (message.includes("feeling") || message.includes("mood")) return randomChoice(responses.feelings);
    if (message.includes("tech") || message.includes("programming") || message.includes("ai")) return randomChoice(responses.tech);
    if (message.includes("joke")) return randomChoice(responses.jokes);
    if (message.includes("spiritual") || message.includes("god") || message.includes("bible")) return randomChoice(responses.spiritual);
    if (message.includes("motivate") || message.includes("encourage") || message.includes("motivation")) return randomChoice(responses.motivation);
    if (message.includes("game") || message.includes("play")) return randomChoice(responses.games);

    return "Hmm… I’m not sure about that yet. Can you ask something else?";
}

function sendMessage() {
    const userInput = document.getElementById('userInput');
    const message = userInput.value.trim();
    if (!message) return;
    addMessage(message, 'user');
    userInput.value = '';

    const typingMsg = addMessage('NicholasAI is typing...', 'ai', true);

    setTimeout(() => {
        chatWindow.removeChild(typingMsg);
        const response = getResponse(message);
        addMessage(response, 'ai');
        speak(response);
    }, 1000);
}

// --- Text-to-Speech ---
function speak(text) {
    if (!('speechSynthesis' in window)) return;
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'en-US';
    speechSynthesis.speak(utterance);
}

// --- Voice Input ---
function startVoiceInput() {
    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        alert('Your browser does not support voice input.');
        return;
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = 'en-US';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onresult = (event) => {
        const spokenText = event.results[0][0].transcript;
        document.getElementById('userInput').value = spokenText;
        sendMessage();
    };

    recognition.onerror = (event) => console.error(event.error);
    recognition.start();
}
</script>

</body>
</html>
