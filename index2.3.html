<!-- ========================= NICHOLASAI SIDEBAR CHAT (DEMO) ========================= -->
<style>
  :root {
    --nai-accent: #1e90ff;
    --nai-bg: #0a0f29;
    --nai-panel: #121635;
    --nai-text: #e9ecff;
    --nai-bot: #2d325a;
    --nai-user: #1e90ff;
    --nai-glow: 0 0 18px rgba(30,144,255,.55);
  }
  #nai-launcher{
    position:fixed; right:18px; bottom:18px; width:58px; height:58px; border:0; border-radius:50%;
    background:var(--nai-accent); color:#fff; font-size:24px; cursor:pointer; box-shadow:var(--nai-glow); z-index:999999;
    display:flex; align-items:center; justify-content:center;
  }
  #nai-launcher:active{ transform:scale(.98); }
  #nai-panel{
    position:fixed; top:0; right:-420px; width:400px; max-width:92vw; height:100dvh; background:var(--nai-panel);
    box-shadow:-6px 0 24px rgba(2,8,40,.55); border-left:1px solid rgba(30,144,255,.25);
    display:flex; flex-direction:column; transition:right .35s ease; z-index:999998; color:var(--nai-text);
  }
  #nai-panel.open{ right:0; }
  #nai-header{
    padding:14px 16px; background:linear-gradient(90deg, var(--nai-accent), #5bb0ff);
    display:flex; align-items:center; justify-content:space-between; color:#fff;
  }
  #nai-title{ display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px; }
  #nai-title .dot{ width:10px; height:10px; border-radius:50%; background:#7CFC00; box-shadow:0 0 10px #7CFC00; }
  #nai-close{ background:transparent; border:0; color:#fff; font-size:22px; cursor:pointer; }
  #nai-msgs{ flex:1; overflow-y:auto; padding:14px; display:flex; flex-direction:column; gap:10px; background:var(--nai-bg); }
  .nai-msg{ max-width:82%; padding:10px 12px; border-radius:14px; line-height:1.35; box-shadow:0 2px 8px rgba(0,0,0,.25); word-wrap:break-word; }
  .nai-bot{ background:var(--nai-bot); align-self:flex-start; border-top-left-radius:6px; }
  .nai-user{ background:var(--nai-user); color:#fff; align-self:flex-end; border-top-right-radius:6px; }
  #nai-inputbar{ display:flex; gap:8px; padding:12px; border-top:1px solid rgba(30,144,255,.25); background:rgba(255,255,255,.02); }
  #nai-text{ flex:1; background:#0c1233; color:var(--nai-text); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px; outline:none; }
  #nai-send{ background:var(--nai-accent); border:0; color:#fff; padding:0 14px; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:var(--nai-glow); }
  #nai-send:disabled{ opacity:.6; cursor:not-allowed; box-shadow:none; }
  .nai-typing{ display:inline-flex; gap:4px; align-items:center; }
  .nai-typing span{ width:6px; height:6px; border-radius:50%; background:#cfe3ff; animation:nai-bump 1.2s infinite; }
  .nai-typing span:nth-child(2){ animation-delay:.15s; } .nai-typing span:nth-child(3){ animation-delay:.3s; }
  @keyframes nai-bump{ 0%,80%,100%{ opacity:.25; transform:translateY(0);} 40%{ opacity:1; transform:translateY(-5px);} }
  @media (max-width:420px){ #nai-msgs{ padding:10px; } #nai-inputbar{ padding:10px; } }
</style>

<button id="nai-launcher" aria-label="Open NicholasAI">ðŸ’¬</button>

<aside id="nai-panel" aria-label="NicholasAI sidebar" aria-hidden="true">
  <div id="nai-header">
    <div id="nai-title"><span class="dot"></span> NicholasAI <small style="opacity:.9;font-weight:500;">â€” powered by Grayson</small></div>
    <button id="nai-close" title="Close">âœ–</button>
  </div>
  <div id="nai-msgs"></div>
  <div id="nai-inputbar">
    <input id="nai-text" type="text" placeholder="Type a messageâ€¦" autocomplete="off" />
    <button id="nai-send">Send</button>
  </div>
</aside>

<script>
(() => {
  const $ = (s,p=document)=>p.querySelector(s);
  const msgs=$("#nai-msgs"), panel=$("#nai-panel"), openBtn=$("#nai-launcher"), closeBtn=$("#nai-close"), input=$("#nai-text"), sendBtn=$("#nai-send");

  let busy=false, saved=JSON.parse(localStorage.getItem("nicholasai_chat_history_demo")||"[]");

  const pushAndSave=(role,content)=>{ saved.push({role,content,t:Date.now()}); localStorage.setItem("nicholasai_chat_history_demo",JSON.stringify(saved)); };
  const addMsg=(text,who="bot")=>{ const div=document.createElement("div"); div.className=`nai-msg ${who==="user"?"nai-user":"nai-bot"}`; div.textContent=text; msgs.appendChild(div); msgs.scrollTop=msgs.scrollHeight; return div; };
  const addTyping=()=>{ const div=document.createElement("div"); div.className="nai-msg nai-bot"; div.innerHTML=`<span class="nai-typing"><span></span><span></span><span></span></span>`; msgs.appendChild(div); msgs.scrollTop=msgs.scrollHeight; return div; };

  const openPanel=()=>{ panel.classList.add("open"); panel.setAttribute("aria-hidden","false"); input.focus();
    if(saved.length===0) addMsg("Hello ðŸ‘‹ Iâ€™m NicholasAI. How can I help you today?");
    else { msgs.innerHTML=""; saved.forEach(m=>addMsg(m.content, m.role==="user"?"user":"bot")); }
  };
  const closePanel=()=>{ panel.classList.remove("open"); panel.setAttribute("aria-hidden","true"); };
  openBtn.addEventListener("click", openPanel);
  closeBtn.addEventListener("click", closePanel);

  const sendCurrent=async()=>{
    const text=input.value.trim(); if(!text||busy)return; input.value="";
    addMsg(text,"user"); pushAndSave("user",text);
    busy=true; sendBtn.disabled=true; const typing=addTyping();

    // ===== Dummy AI response =====
    setTimeout(()=>{
      typing.remove();
      const reply = `ðŸ’¡ You said: "${text}". Hereâ€™s a dummy response from NicholasAI!`;
      addMsg(reply,"bot"); pushAndSave("bot",reply);
      busy=false; sendBtn.disabled=false; input.focus();
    }, 1000 + Math.random()*1000);
  };

  sendBtn.addEventListener("click",sendCurrent);
  input.addEventListener("keydown",e=>{ if(e.key==="Enter"&&!e.shiftKey){ e.preventDefault(); sendCurrent(); } });
  window.addEventListener("keydown", e=>{ if(e.altKey && e.key.toLowerCase()==="n"){ panel.classList.contains("open")?closePanel():openPanel(); } });
})();
</script>
<!-- ========================= /DEMO ========================= -->
